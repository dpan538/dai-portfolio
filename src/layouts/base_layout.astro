---
const {
    title = "Dai Pan",
    description = "Dai Pan — image-based work across photography, printmaking, and conceptual design.",
    canonical = "https://daiportfolio.com",
    active = "", // "works" | "about"
} = Astro.props;

const nav = [
    { href: "/gallery_design", label: "Monolith for Light", key: "gallery_design"},
    { href: "/reframed_still", label: "Reframed Still", key: "reframed_still"},
    { href: "/about", label: "About", key: "about" },
];
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{title}</title>

        <meta name="description" content={description} />
        <link rel="canonical" href={canonical} />

        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:type" content="website" />
        <meta property="og:url" content={canonical} />

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600&family=Coustard:wght@400;900&family=Oldenburg&display=swap"
            rel="stylesheet"
        />
    </head>

    <body>
        <div class="shell">
            <aside class="sidebar">
                <div class="brand">
                    <a href="/" class="brand_name">Dai Pan</a>
                </div>

                <nav class="menu">
                    {
                        nav.map((item) => (
                            <a
                                class={`menu_link ${active === item.key ? "is_active" : ""}`}
                                href={item.href}>
                                {item.label}
                            </a>
                        ))
                    }
                </nav>

                <!-- Social icons (keep minimal) -->
                <div class="social">
                    <a
                        class="icon_link"
                        href="mailto:dpan53853@gmail.com"
                        aria-label="Email (Work)">
                        <svg
                            viewBox="0 0 24 24"
                            width="28"
                            height="28"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.6">
                            <path d="M4 6h16v12H4z"></path>
                            <path d="M4 7l8 6 8-6"></path>
                        </svg>
                    </a>

                    <a
                        class="icon_link"
                        href="https://www.instagram.com/jumpingchick666"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="Instagram">
                        <svg
                            viewBox="0 0 24 24"
                            width="32"
                            height="32"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.6">
                            <rect x="6" y="6" width="12" height="12" rx="3"
                            ></rect>
                            <path
                                d="M12 15.2a3.2 3.2 0 1 0 0-6.4 3.2 3.2 0 0 0 0 6.4z"
                            ></path>
                            <path d="M16.2 7.8h.01"></path>
                        </svg>
                    </a>
                </div>
            </aside>

            <main class="content">
                <slot />
            </main>
        </div>

        <style>
            :global(:root) {
                --body:
                    "Be Vietnam Pro", system-ui, -apple-system, Segoe UI,
                    Roboto, Helvetica, Arial;
                --heading:
                    "Coustard", ui-serif, Georgia, "Times New Roman", Times,
                    serif;
                --display: "Oldenburg", serif;

                --bg: #ffffff;
                --text: #111111;
                --muted: #6a6a6a;
                --line: #ececec;
                --max: 900px;
                --top_align: 64px;
            }

            :global(body) {
                margin: 0;
                background: var(--bg);
                color: var(--text);
                font-family: var(--body);
                line-height: 1.6;
                font-size: 18px;
                letter-spacing: 0.1px;
            }

            :global(a) {
                color: inherit;
                text-decoration: none;
            }

            /* subtle hover, barely visible */
            :global(a:hover) {
                text-decoration: underline;
                text-underline-offset: 3px;
            }

            .shell {
                min-height: 100vh;
                display: grid;
                grid-template-columns: 280px 1fr;
            }

            .sidebar {
                padding: 48px 48px;
                border-right: 1px solid var(--line);
                position: sticky;
                top: 0;
                height: 100vh;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
                gap: 18px;
            }

            .brand_name {
                font-family: var(--display);
                font-weight: 400;
                letter-spacing: 0.06em;
                font-size: 30px;
            }

            .menu {
                display: grid;
                gap: 12px;
                margin-top: 10px;
            }

            .menu_link {
                font-size: 18px;
                color: var(--muted);
                width: fit-content;
            }

            .menu_link.is_active {
                color: var(--text);
                text-decoration: underline;
                text-underline-offset: 3px;
            }

            .social {
                margin-top: auto;
                display: flex;
                gap: 12px;
                color: var(--muted);
            }

            .icon_link {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 30px;
                height: 30px;
                border-radius: 999px;
            }

            .icon_link:hover {
                text-decoration: none;
                outline: 1px solid var(--line);
                color: var(--text);
            }

            .content {
                padding: 64px 64px 72px;
                box-sizing: border-box;
            }

            .content > :global(*) {
                max-width: var(--max);
            }

            :global(h1) {
                font-family: var(--display);
                margin: 0 0 16px;
                font-size: 30px;
                font-weight: 600;
                letter-spacing: 0.2px;
            }

            :global(h2) {
                font-family: var(--heading);
                margin: 30px 0 10px;
                font-size: 15px;
                font-weight: 600;
                letter-spacing: 0.05em;
                text-transform: uppercase;
                color: var(--text);
            }

            :global(p) {
                margin: 0 0 14px;
            }

            @media (max-width: 820px) {
                .shell {
                    grid-template-columns: 1fr;
                }
                .sidebar {
                    position: relative;
                    height: auto;
                    border-right: none;
                    border-bottom: 1px solid var(--line);
                }
            }

            .shell {
                display: grid;
                grid-template-columns: 320px 1fr;
                min-height: 100vh;
            }

            .main {
                min-width: 0; /* 很重要：防止图片/长文本把布局撑爆 */
            }

            .content {
                /* 关键：在右侧 1fr 区域里居中 */
                max-width: 980px; /* 你想要更窄就 900/920 */
                margin-inline: auto;
                padding-inline: clamp(28px, 4vw, 64px);
                padding-block: clamp(32px, 4vw, 72px);
            }
        </style>
    </body>
</html>
